<!DOCTYPE html>
<html>
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="stylesheet" href="style.css">
    <title>Evolution Prediction</title>
    
</head>
<body>

<header>
    <h1>Evolution Prediction</h1>
</header>

<form onsubmit="runProgram(); return false;">
    <h2 class="question">What do you think will happen in the future?</h2>
    <input 
        id="future" 
        class="input-box" 
        placeholder="Get creative write anything that comes to mind!"
        required
    >

    <h2 class="question">In how much time will this happen?</h2>
    <input 
        id="time" 
        class="input-box" 
        placeholder="This can be as far in the future as you want!"
        required
    >

    <br><br>

    <button class="generate-btn" type="submit">
        Generate Image
    </button>
</form>
<p id="status"></p>
<img id="result">

<script>
async function runProgram() {
    const future = document.getElementById("future").value;
    const time = document.getElementById("time").value;
    
    document.getElementById("status").innerText = "Generating image...";
    
    const formData = new FormData();
    formData.append("future", future);
    formData.append("time", time);

    const res = await fetch("/generate", {
        method: "POST",
        body: formData
    });

    const data = await res.json();

    if (data.error) {
        document.getElementById("status").innerText = data.error;
        return;
    }

    document.getElementById("result").src =
        "data:image/png;base64," + data.image;

    document.getElementById("status").innerText = "Done!";
}
</script>

</body>
</html>
